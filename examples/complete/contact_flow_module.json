{
    "Version": "2019-10-30",
    "StartAction": "ea922542-6817-4db1-b366-8a2441be17e6",
    "Metadata": {
      "entryPointPosition": {
        "x": -176.8,
        "y": -24
      },
      "ActionMetadata": {
        "aff83884-d142-4d8e-8e92-905922211a14": {
          "position": {
            "x": 899.2,
            "y": 707.2
          }
        },
        "47e4bbed-f6e5-4360-a282-673e1ca3eadf": {
          "position": {
            "x": 438.40000000000003,
            "y": 164
          },
          "parameters": {
            "LambdaInvocationAttributes": {
              "extensionNumber": {
                "useDynamic": true
              }
            }
          },
          "dynamicMetadata": {
            "extensionNumber": true
          }
        },
        "78f12bf0-7477-44b6-850f-e6dddcbac20b": {
          "position": {
            "x": 668.8000000000001,
            "y": 637.6
          }
        },
        "ea922542-6817-4db1-b366-8a2441be17e6": {
          "position": {
            "x": -68.8,
            "y": 113.60000000000001
          },
          "dynamicParams": []
        },
        "97f67664-917b-4987-a996-a144ba7ce16e": {
          "position": {
            "x": 180,
            "y": 182.4
          },
          "parameters": {
            "LambdaFunctionARN": {
              "displayName": "UpdateTelephonicSignatureTrackingTableFunction"
            },
            "LambdaInvocationAttributes": {
              "ContactID": {
                "useDynamic": true
              }
            }
          },
          "dynamicMetadata": {
            "ContactID": true
          }
        },
        "bc8cc2d6-74ec-4bb2-bbbb-024337125a0f": {
          "position": {
            "x": 683.2,
            "y": 174.4
          },
          "parameters": {
            "Attributes": {
              "agentId": {
                "useDynamic": true
              },
              "transcribeVoicemail": {
                "useDynamic": true
              },
              "saveCallRecording": {
                "useDynamic": true
              },
              "agentName": {
                "useDynamic": true
              },
              "encryptVoicemail": {
                "useDynamic": true
              },
              "transferMessage": {
                "useDynamic": true
              }
            }
          },
          "dynamicParams": [
            "agentId",
            "transcribeVoicemail",
            "saveCallRecording",
            "agentName",
            "encryptVoicemail",
            "transferMessage"
          ]
        },
        "5a9f8403-2dde-4272-ac6b-d63123f23854": {
          "position": {
            "x": 946.4000000000001,
            "y": 168
          }
        },
        "b5c47fa1-a10f-475c-a3c7-5d2f302bd77f": {
          "position": {
            "x": 2254.4,
            "y": 215.20000000000002
          }
        },
        "c76357cf-9e00-4f13-8089-a2554799e8f0": {
          "position": {
            "x": 2868.8,
            "y": 240.8
          }
        },
        "9407c5df-f836-4edc-b064-f5799d1618e1": {
          "position": {
            "x": 1235.2,
            "y": 172.8
          },
          "toCustomer": false,
          "fromCustomer": true
        },
        "22c01556-8993-4313-8f65-b786c75b7288": {
          "position": {
            "x": 2001.6000000000001,
            "y": 261.6
          }
        },
        "ceba2833-b064-4017-b7dc-ffc41d43994e": {
          "position": {
            "x": 2559.2000000000003,
            "y": 372
          }
        },
        "7f6d8142-15e3-4d1d-bd9a-dd53112795bd": {
          "position": {
            "x": 1504.8000000000002,
            "y": 383.20000000000005
          },
          "dynamicParams": []
        },
        "a5676d35-8e9d-452e-9adf-30cff72d9987": {
          "position": {
            "x": 1756.8000000000002,
            "y": 277.6
          },
          "parameters": {
            "PromptId": {
              "displayName": "Beep.wav"
            }
          },
          "promptName": "Beep.wav",
          "conditionMetadata": []
        }
      },
      "name": "Telephonic Signatures Flow",
      "description": "",
      "type": "queueTransfer",
      "status": "published",
      "hash": {}
    },
    "Actions": [
      {
        "Parameters": {},
        "Identifier": "aff83884-d142-4d8e-8e92-905922211a14",
        "Type": "DisconnectParticipant",
        "Transitions": {}
      },
      {
        "Parameters": {
          "LambdaFunctionARN": "arn:aws:lambda:us-west-2:770688834456:function:GTS-Gold-Voicemail-Voicem-GetAgentByExtensionLambd-Zb5vNfd1oPHj",
          "InvocationTimeLimitSeconds": "8",
          "LambdaInvocationAttributes": {
            "extensionNumber": "$.Attributes.extensionNumber"
          }
        },
        "Identifier": "47e4bbed-f6e5-4360-a282-673e1ca3eadf",
        "Type": "InvokeLambdaFunction",
        "Transitions": {
          "NextAction": "bc8cc2d6-74ec-4bb2-bbbb-024337125a0f",
          "Errors": [
            {
              "NextAction": "78f12bf0-7477-44b6-850f-e6dddcbac20b",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "SSML": "<speak>\n$.Attributes.FatalErrorPrompt\n</speak>"
        },
        "Identifier": "78f12bf0-7477-44b6-850f-e6dddcbac20b",
        "Type": "MessageParticipant",
        "Transitions": {
          "NextAction": "aff83884-d142-4d8e-8e92-905922211a14",
          "Errors": [
            {
              "NextAction": "aff83884-d142-4d8e-8e92-905922211a14",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "Attributes": {
            "extensionNumber": "0001"
          }
        },
        "Identifier": "ea922542-6817-4db1-b366-8a2441be17e6",
        "Type": "UpdateContactAttributes",
        "Transitions": {
          "NextAction": "97f67664-917b-4987-a996-a144ba7ce16e",
          "Errors": [
            {
              "NextAction": "97f67664-917b-4987-a996-a144ba7ce16e",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "LambdaFunctionARN": "arn:aws:lambda:us-west-2:770688834456:function:UpdateTelephonicSignatureTrackingTableFunction",
          "InvocationTimeLimitSeconds": "3",
          "LambdaInvocationAttributes": {
            "ContactID": "$.ContactId"
          }
        },
        "Identifier": "97f67664-917b-4987-a996-a144ba7ce16e",
        "Type": "InvokeLambdaFunction",
        "Transitions": {
          "NextAction": "47e4bbed-f6e5-4360-a282-673e1ca3eadf",
          "Errors": [
            {
              "NextAction": "78f12bf0-7477-44b6-850f-e6dddcbac20b",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "Attributes": {
            "agentId": "$.External.agentId",
            "transcribeVoicemail": "$.External.transcribeVoicemail",
            "saveCallRecording": "$.External.saveCallRecording",
            "agentName": "$.External.agentName",
            "encryptVoicemail": "$.External.encryptVoicemail",
            "transferMessage": "$.External.transferMessage"
          }
        },
        "Identifier": "bc8cc2d6-74ec-4bb2-bbbb-024337125a0f",
        "Type": "UpdateContactAttributes",
        "Transitions": {
          "NextAction": "5a9f8403-2dde-4272-ac6b-d63123f23854",
          "Errors": [
            {
              "NextAction": "78f12bf0-7477-44b6-850f-e6dddcbac20b",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "SSML": "<speak>\nHello. This is the telephonic signatures flow. When you hear the beep, if you consent to allow us to use the data that we have gathered from this phone call, please say; Yes, I consent; or say; No, I do not consent; followed by the pound sign.\n</speak>"
        },
        "Identifier": "5a9f8403-2dde-4272-ac6b-d63123f23854",
        "Type": "MessageParticipant",
        "Transitions": {
          "NextAction": "9407c5df-f836-4edc-b064-f5799d1618e1",
          "Errors": [
            {
              "NextAction": "9407c5df-f836-4edc-b064-f5799d1618e1",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "SSML": "<speak>\nThank you for providing your consent. I will now return you to your agent.\n</speak>"
        },
        "Identifier": "b5c47fa1-a10f-475c-a3c7-5d2f302bd77f",
        "Type": "MessageParticipant",
        "Transitions": {
          "NextAction": "c76357cf-9e00-4f13-8089-a2554799e8f0",
          "Errors": [
            {
              "NextAction": "ceba2833-b064-4017-b7dc-ffc41d43994e",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {},
        "Identifier": "c76357cf-9e00-4f13-8089-a2554799e8f0",
        "Type": "DisconnectParticipant",
        "Transitions": {}
      },
      {
        "Parameters": {
          "MediaStreamingState": "Enabled",
          "MediaStreamType": "Audio",
          "Participants": [
            {
              "ParticipantType": "Customer",
              "MediaDirections": [
                "From"
              ]
            }
          ]
        },
        "Identifier": "9407c5df-f836-4edc-b064-f5799d1618e1",
        "Type": "UpdateContactMediaStreamingBehavior",
        "Transitions": {
          "NextAction": "a5676d35-8e9d-452e-9adf-30cff72d9987",
          "Errors": [
            {
              "NextAction": "7f6d8142-15e3-4d1d-bd9a-dd53112795bd",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "MediaStreamingState": "Disabled",
          "Participants": [
            {
              "ParticipantType": "Customer",
              "MediaDirections": [
                "To",
                "From"
              ]
            }
          ],
          "MediaStreamType": "Audio"
        },
        "Identifier": "22c01556-8993-4313-8f65-b786c75b7288",
        "Type": "UpdateContactMediaStreamingBehavior",
        "Transitions": {
          "NextAction": "b5c47fa1-a10f-475c-a3c7-5d2f302bd77f",
          "Errors": [
            {
              "NextAction": "ceba2833-b064-4017-b7dc-ffc41d43994e",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "SSML": "<speak>\n$.Attributes.FatalErrorPrompt\n</speak>"
        },
        "Identifier": "ceba2833-b064-4017-b7dc-ffc41d43994e",
        "Type": "MessageParticipant",
        "Transitions": {
          "NextAction": "c76357cf-9e00-4f13-8089-a2554799e8f0",
          "Errors": [
            {
              "NextAction": "c76357cf-9e00-4f13-8089-a2554799e8f0",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "Attributes": {
            "startStreamingAudioStatus": "failure"
          }
        },
        "Identifier": "7f6d8142-15e3-4d1d-bd9a-dd53112795bd",
        "Type": "UpdateContactAttributes",
        "Transitions": {
          "NextAction": "a5676d35-8e9d-452e-9adf-30cff72d9987",
          "Errors": [
            {
              "NextAction": "ceba2833-b064-4017-b7dc-ffc41d43994e",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      },
      {
        "Parameters": {
          "StoreInput": "False",
          "InputTimeLimitSeconds": "60",
          "PromptId": "arn:aws:connect:us-west-2:770688834456:instance/d9f339f5-f41f-4238-8463-77ac40e8a60e/prompt/daa6dd10-7e8a-4ef7-9050-140fbf6fcd8a"
        },
        "Identifier": "a5676d35-8e9d-452e-9adf-30cff72d9987",
        "Type": "GetParticipantInput",
        "Transitions": {
          "NextAction": "22c01556-8993-4313-8f65-b786c75b7288",
          "Errors": [
            {
              "NextAction": "22c01556-8993-4313-8f65-b786c75b7288",
              "ErrorType": "InputTimeLimitExceeded"
            },
            {
              "NextAction": "22c01556-8993-4313-8f65-b786c75b7288",
              "ErrorType": "NoMatchingCondition"
            },
            {
              "NextAction": "ceba2833-b064-4017-b7dc-ffc41d43994e",
              "ErrorType": "NoMatchingError"
            }
          ]
        }
      }
    ]
  }